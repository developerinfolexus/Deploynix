generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model User {
  id            String        @id @default(cuid())
  name          String
  email         String        @unique
  password_hash String
  role          String        // 'candidate' or 'employer'
  created_at    DateTime      @default(now())

  // Relations
  postedJobs    Job[]         @relation("EmployerJobs")
  applications  Application[] @relation("CandidateApplications")
}

model Job {
  id              String        @id @default(cuid())
  job_title       String
  job_description String
  company_name    String
  location        String
  salary_range    String
  posted_by       String
  created_at      DateTime      @default(now())

  // Relations
  employer        User          @relation("EmployerJobs", fields: [posted_by], references: [id])
  applications    Application[]
}

model Application {
  id                 String   @id @default(cuid())
  job_id             String
  candidate_id       String
  applicant_name     String   @default("")
  phone              String   @default("")
  address            String   @default("")
  resume_url         String?
  application_status String   @default("pending") // e.g. 'pending', 'reviewed', 'accepted', 'rejected'
  applied_at         DateTime @default(now())

  // Relations
  job                Job      @relation(fields: [job_id], references: [id])
  candidate          User     @relation("CandidateApplications", fields: [candidate_id], references: [id])
}
